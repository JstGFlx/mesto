(()=>{"use strict";class e{constructor(e,t){this.setButtonState=()=>{this._checkInvalidInput()?(this._button.classList.add(this._inactiveButton),this._button.disabled=!0):(this._button.classList.remove(this._inactiveButton),this._button.disabled=!1)},this.resetValidityMassage=()=>{this._inputList.forEach((e=>{e.classList.remove(this._inputError)})),this._errors.forEach((e=>{e.textContent=""}))},this._form=document.querySelector(`form[name=${t}]`),this._input=e.inputSelector,this._submitButton=e.submitButtonSelector,this._inactiveButton=e.inactiveButtonClass,this._inputError=e.inputErrorClass,this._errors=this._form.querySelectorAll(e.errorClass),this._inputList=[...this._form.querySelectorAll(this._input)],this._button=this._form.querySelector(this._submitButton)}_showError(e){this._error=this._form.querySelector(`#${e.id}-error`),this._error.textContent=e.validationMessage,e.classList.add(this._inputError)}_hideError(e){this._error=this._form.querySelector(`#${e.id}-error`),this._error.textContent="",e.classList.remove(this._inputError)}_checkInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideError(e):this._showError(e)}_setEventListener(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.setButtonState()}))}))}reseteInputsValues(){this._inputList.forEach((e=>{e.value=""}))}enableValidation(){this._setEventListener(),this.setButtonState()}}class t{constructor({name:e,link:t,likes:s,_id:i,owner:r},o,n,a,h,_,u,p){this._title=e,this._image=t,this._id=i,this._owner=r,this._template=document.querySelector(o),this._openPopupView=a,this._openPopupDelete=h,this._putLikeCard=_,this._deleteLike=u,this._likes=s,this._myId=n,this._showErrorMassage=p,this._element=this._getTemplate(),this._elementImage=this._element.querySelector(".card__image"),this._elementDesc=this._element.querySelector(".card__name"),this._elementBtnDelete=this._element.querySelector(".btn_type_delete"),this._likeButton=this._element.querySelector(".card__like"),this._likeCounter=this._element.querySelector(".card__like-counter")}_getTemplate(){return this._template.content.querySelector(".card").cloneNode(!0)}_toggleLikeTheCard(e,t){this._checkMyLike()?this._deleteLike(t).then((t=>{this._likes=t.likes,this._likeCounter.textContent=t.likes.length,e.target.classList.toggle("card__like_active")})).catch((e=>{this._showErrorMassage(e)})):this._putLikeCard(t).then((t=>{this._likes=t.likes,this._likeCounter.textContent=t.likes.length,e.target.classList.toggle("card__like_active")})).catch((e=>{this._showErrorMassage(e)}))}_checkMyLike(){return this._likes.some((e=>e._id===this._myId))}generateCard(){return this._elementImage.src=this._image,this._elementImage.alt=this._title,this._elementDesc.textContent=this._title,this._likeCounter.textContent=this._likes.length,this._setEventListeners(),this._owner._id===this._myId&&this._elementBtnDelete.classList.add("btn_visible"),this._checkMyLike()&&this._likeButton.classList.add("card__like_active"),this._element}_setEventListeners(){this._elementImage.addEventListener("click",(()=>{this._openPopupView(this._image,this._title)})),this._likeButton.addEventListener("click",(e=>{this._toggleLikeTheCard(e,this._id,this._likes)})),this._elementBtnDelete.addEventListener("click",(()=>{this._openPopupDelete(this._element,this._id)}))}}class s{constructor(e){this.closePopup=()=>{this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._closeByEscape)},this._closeByEscape=e=>{27===e.keyCode&&this.closePopup()},this._popup=document.querySelector(e)}openPopup(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._closeByEscape)}_closeByClick(e){e.target.classList.contains("popup_opened")&&this.closePopup()}setEventListeners(){this._popup.querySelector(".btn_type_close").addEventListener("click",this.closePopup),this._popup.addEventListener("mousedown",(e=>this._closeByClick(e)))}}class i extends s{constructor({submitForm:e},t,s){super(t),this.setEventListeners=()=>{super.setEventListeners(),this._form=this._popup.querySelector(".popup__form"),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._submitForm(this._getInputValues())}))},this._submitForm=e,this._inputList=this._popup.querySelectorAll(".popup__input"),this._resetValidityMassage=s}setInitialInputsValues(e){this._inputList.forEach((t=>{e[t.name]&&(t.value=e[t.name])}))}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>this._formValues[e.name]=e.value)),this._formValues}closePopup(){super.closePopup(),this._form.reset(),this._resetValidityMassage()}}const r={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:".popup__error"},o=document.querySelector(".btn_type_edit"),n=document.querySelector(".btn_type_add"),a=document.querySelector(".profile__avatar"),h=document.querySelector(".popup__button_type_edit"),_=document.querySelector(".popup__button_type_edit-avatar"),u=document.querySelector(".popup__button_type_add"),p=document.querySelector(".popup__button_type_delete"),l=document.querySelector(".error__template"),c=document.querySelector(".errors");function d(e,t){t.textContent=e?"Сохранение...":"Сохранить"}function m(e){u.textContent=e?"Создание...":"Создать"}function y(e){p.textContent=e?"Удаление...":"Да"}function f(e){const t=function(e){const t=l.content.querySelector(".error").cloneNode(!0);return t.querySelector(".error__massage").textContent=`${e}. Что-то пошло не так :(`,t}(e);c.prepend(t),new Promise((e=>{setTimeout((()=>{t.classList.add("popup_opened"),e(t)}),0)})).then((e=>new Promise((t=>{setTimeout((()=>{!function(e){e.classList.remove("popup_opened")}(e),t(e)}),5e3)})))).then((e=>{setTimeout((()=>{e.remove()}),1e3)}))}let L;const v=new e(r,"edit-profile"),b=new e(r,"add-new-card"),k=new e(r,"change-avatar"),E=new class{constructor({baseUrl:e,headers:t},s,i,r,o,n){this.patchAvatar=e=>(this._renderLoadTextBtnEdit(!0,this._btnSubmitEditAvatar),fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":this._contentType},body:JSON.stringify({avatar:e})}).then((e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`)))),this.deleteCard=e=>(this._renderLoadTextBtnDelete(!0),fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:{authorization:this._authorization}}).then((e=>e.ok?e:Promise.reject(`Ошибка: ${e.status}`)))),this.putLikeCard=e=>fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:{authorization:this._authorization}}).then((e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`))),this.deleteLike=e=>fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:{authorization:this._authorization}}).then((e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`))),this._baseUrl=e,this._authorization=t.authorization,this._contentType=t["Content-Type"],this._renderLoadTextBtnEdit=s,this._renderLoadTextBtnAdd=i,this._renderLoadTextBtnDelete=r,this._btnSubmitEdit=o,this._btnSubmitEditAvatar=n}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:{authorization:this._authorization}}).then((e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`)))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:{authorization:this._authorization}}).then((e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`)))}pathUserInfo({name:e,about:t}){return this._renderLoadTextBtnEdit(!0,this._btnSubmitEdit),fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":this._contentType},body:JSON.stringify({name:e,about:t})}).then((e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`)))}postNewCard({name:e,link:t}){return this._renderLoadTextBtnAdd(!0),fetch(`${this._baseUrl}/cards`,{method:"POST",headers:{authorization:this._authorization,"Content-Type":this._contentType},body:JSON.stringify({name:e,link:t})}).then((e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`)))}}({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-20",headers:{authorization:"79accf8f-cc76-4033-84f9-2d1d81c30157","Content-Type":"application/json"}},d,m,y,h,_);E.getUserInfo().then((e=>{L=e._id,w.setUserInfo(e)})).catch((e=>{f(e)}));const g=new class{constructor({renderer:e},t){this._renderer=e,this._container=document.querySelector(t)}renderItems(e){e.forEach((e=>this._renderer(e)))}appendItem(e){this._container.append(e)}prependItem(e){this._container.prepend(e)}}({renderer:e=>{const t=S(e);g.appendItem(t.generateCard())}},".cards");E.getInitialCards().then((e=>{g.renderItems(e)})).catch((e=>{f(e)}));const C=new i({submitForm:e=>{E.postNewCard(e).then((e=>{const t=S(e);g.prependItem(t.generateCard())})).catch((e=>{f(e)})).finally((()=>{m(!1),C.closePopup()}))}},".popup_type_add",b.resetValidityMassage);function S(e){return new t(e,".template",L,B.openPopup,q.openPopup,E.putLikeCard,E.deleteLike,f)}const I=new i({submitForm:e=>{E.pathUserInfo(e).then((e=>{w.setUserInfo(e)})).catch((e=>{f(e)})).finally((()=>{d(!1,h),I.closePopup()}))}},".popup_type_edit",v.resetValidityMassage),P=new i({submitForm:e=>{E.patchAvatar(e.link).then((e=>{w.setUserInfo(e)})).catch((e=>{f(e)})).finally((()=>{P.closePopup(),d(!1,_)}))}},".popup_type_avatar",k.resetValidityMassage),B=new class extends s{constructor(e){super(e),this.openPopup=(e,t)=>{super.openPopup(),this._image.src=e,this._desc.textContent=t,this._image.alt=t},this._image=this._popup.querySelector(".popup__image"),this._desc=this._popup.querySelector(".popup__description")}}(".popup_type_img"),q=new class extends s{constructor(e,t,s,i){super(e),this.setEventListeners=()=>{super.setEventListeners(),this._buttonDelete.addEventListener("click",(()=>{this._deleteCard()}))},this.openPopup=(e,t)=>{super.openPopup(),this._card=e,this._id=t},this._handleDeleteCard=t,this._buttonDelete=this._popup.querySelector(".popup__button"),this._renderLoadTextBtnDelete=s,this._showErrorMassage=i}_deleteCard(){this._renderLoadTextBtnDelete(!0),this._handleDeleteCard(this._id).catch((e=>{this._showErrorMassage(e)})).finally((()=>{this._renderLoadTextBtnDelete(!1),this._card.remove(),this.closePopup()}))}}(".popup_type_delete",E.deleteCard,y,f),w=new class{constructor({name:e,about:t,avatar:s}){this.getUserInfo=()=>(this._profileValues={},this._profileValues.name=this._profileName.textContent,this._profileValues.about=this._profileAbout.textContent,this._profileValues),this.setUserInfo=({name:e,about:t,avatar:s})=>{this._profileName.textContent=e,this._profileAbout.textContent=t,this._profileAvatar.style.backgroundImage=`url(${s})`},this._profileName=document.querySelector(e),this._profileAbout=document.querySelector(t),this._profileAvatar=document.querySelector(s)}}({name:".profile__name",about:".profile__about-me",avatar:".profile__avatar"});I.setEventListeners(),C.setEventListeners(),B.setEventListeners(),q.setEventListeners(),P.setEventListeners(),v.enableValidation(),b.enableValidation(),k.enableValidation(),o.addEventListener("click",(()=>{I.setInitialInputsValues(w.getUserInfo()),v.resetValidityMassage(),v.setButtonState(),I.openPopup()})),n.addEventListener("click",(()=>{b.resetValidityMassage(),b.reseteInputsValues(),b.setButtonState(),C.openPopup()})),a.addEventListener("click",(()=>{k.reseteInputsValues(),k.resetValidityMassage(),k.setButtonState(),P.openPopup()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJmb3JtIiwic2V0QnV0dG9uU3RhdGUiLCJ0aGlzIiwiX2NoZWNrSW52YWxpZElucHV0IiwiX2J1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsIl9pbmFjdGl2ZUJ1dHRvbiIsImRpc2FibGVkIiwicmVtb3ZlIiwicmVzZXRWYWxpZGl0eU1hc3NhZ2UiLCJfaW5wdXRMaXN0IiwiZm9yRWFjaCIsImlucHV0IiwiX2lucHV0RXJyb3IiLCJfZXJyb3JzIiwiZXJyb3IiLCJ0ZXh0Q29udGVudCIsIl9mb3JtIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2lucHV0IiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZXJyb3JDbGFzcyIsIl9zaG93RXJyb3IiLCJfZXJyb3IiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVFcnJvciIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc2V0ZUlucHV0c1ZhbHVlcyIsInZhbHVlIiwiZW5hYmxlVmFsaWRhdGlvbiIsIkNhcmQiLCJuYW1lIiwibGluayIsImxpa2VzIiwiX2lkIiwib3duZXIiLCJ0ZW1wbGF0ZSIsIm15SWQiLCJvcGVuUG9wdXBWaWV3Iiwib3BlblBvcHVwRGVsZXRlIiwicHV0TGlrZUNhcmQiLCJkZWxldGVMaWtlIiwic2hvd0Vycm9yTWFzc2FnZSIsIl90aXRsZSIsIl9pbWFnZSIsIl9vd25lciIsIl90ZW1wbGF0ZSIsIl9vcGVuUG9wdXBWaWV3IiwiX29wZW5Qb3B1cERlbGV0ZSIsIl9wdXRMaWtlQ2FyZCIsIl9kZWxldGVMaWtlIiwiX2xpa2VzIiwiX215SWQiLCJfc2hvd0Vycm9yTWFzc2FnZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2VsZW1lbnRJbWFnZSIsIl9lbGVtZW50RGVzYyIsIl9lbGVtZW50QnRuRGVsZXRlIiwiX2xpa2VCdXR0b24iLCJfbGlrZUNvdW50ZXIiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3RvZ2dsZUxpa2VUaGVDYXJkIiwiZXZ0IiwiX2NoZWNrTXlMaWtlIiwidGhlbiIsInJlcyIsImxlbmd0aCIsInRhcmdldCIsInRvZ2dsZSIsImNhdGNoIiwiZXJyIiwib2JqIiwiZ2VuZXJhdGVDYXJkIiwic3JjIiwiYWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJwb3B1cCIsImNsb3NlUG9wdXAiLCJfcG9wdXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2Nsb3NlQnlFc2NhcGUiLCJrZXlDb2RlIiwib3BlblBvcHVwIiwiX2Nsb3NlQnlDbGljayIsImNvbnRhaW5zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Rm9ybSIsInN1cGVyIiwicHJldmVudERlZmF1bHQiLCJfc3VibWl0Rm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsIl9yZXNldFZhbGlkaXR5TWFzc2FnZSIsInNldEluaXRpYWxJbnB1dHNWYWx1ZXMiLCJ2YWx1ZXMiLCJfZm9ybVZhbHVlcyIsInJlc2V0IiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImJ1dHRvbkVkaXQiLCJidXR0b25BZGQiLCJwcm9maWxlQXZhdGFyIiwiYnRuU3VibWl0RWRpdCIsImJ0blN1Ym1pdEVkaXRBdmF0YXIiLCJidG5TdWJtaXRBZGQiLCJidG5TdWJtaXREZWxldGUiLCJlcnJvclRlbXBsYXRlIiwiZXJyb3JzQ29udGFpbmVyIiwicmVuZGVyTG9hZFRleHRCdG5FZGl0IiwiaXNMb2FkaW5nIiwiYnRuIiwicmVuZGVyTG9hZFRleHRCdG5BZGQiLCJyZW5kZXJMb2FkVGV4dEJ0bkRlbGV0ZSIsImVyckVsZW0iLCJlcnJvckVsZW1lbnQiLCJjcmVhdGVFcnJvckVsZW1lbnQiLCJQcm9taXNlIiwic2V0VGltZW91dCIsInJlc29sdmUiLCJoaWRlRXJyb3JNYXNzYWdlIiwidXNlcklkIiwidmFsaWRhdG9yRWRpdCIsInZhbGlkYXRvckFkZCIsInZhbGlkYXRvckF2YXRhciIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwicGF0Y2hBdmF0YXIiLCJfcmVuZGVyTG9hZFRleHRCdG5FZGl0IiwiX2J0blN1Ym1pdEVkaXRBdmF0YXIiLCJmZXRjaCIsIl9iYXNlVXJsIiwibWV0aG9kIiwiYXV0aG9yaXphdGlvbiIsIl9hdXRob3JpemF0aW9uIiwiX2NvbnRlbnRUeXBlIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdmF0YXIiLCJvayIsImpzb24iLCJyZWplY3QiLCJzdGF0dXMiLCJkZWxldGVDYXJkIiwiX3JlbmRlckxvYWRUZXh0QnRuRGVsZXRlIiwiX3JlbmRlckxvYWRUZXh0QnRuQWRkIiwiX2J0blN1Ym1pdEVkaXQiLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRVc2VySW5mbyIsInBhdGhVc2VySW5mbyIsImFib3V0IiwicG9zdE5ld0NhcmQiLCJ1c2VzSW5mbyIsInNldFVzZXJJbmZvIiwiY2FyZHNMaXN0IiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW1zIiwiaXRlbSIsImFwcGVuZEl0ZW0iLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZEl0ZW0iLCJwcmVwZW5kIiwiY2FyZCIsImNyZWF0ZUNhcmQiLCJwb3B1cFR5cGVBZGQiLCJmaW5hbGx5IiwicG9wdXBUeXBlSW1hZ2UiLCJwb3B1cFR5cGVEZWxldGUiLCJwb3B1cFR5cGVFZGl0IiwicG9wdXBUeXBlQXZhdGFyIiwiX2Rlc2MiLCJoYW5kbGVEZWxldGVDYXJkIiwiX2J1dHRvbkRlbGV0ZSIsIl9kZWxldGVDYXJkIiwiX2NhcmQiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9wcm9maWxlVmFsdWVzIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVBYm91dCIsIl9wcm9maWxlQXZhdGFyIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiXSwibWFwcGluZ3MiOiJtQkFDZSxNQUFNQSxFQUNuQkMsWUFBWUMsRUFBTUMsR0FBTSxLQXFDeEJDLGVBQWlCLEtBQ1ZDLEtBQUtDLHNCQUlSRCxLQUFLRSxRQUFRQyxVQUFVQyxJQUFJSixLQUFLSyxpQkFDaENMLEtBQUtFLFFBQVFJLFVBQVcsSUFKeEJOLEtBQUtFLFFBQVFDLFVBQVVJLE9BQU9QLEtBQUtLLGlCQUNuQ0wsS0FBS0UsUUFBUUksVUFBVyxJQXhDSixLQThEeEJFLHFCQUF1QixLQUNyQlIsS0FBS1MsV0FBV0MsU0FBU0MsSUFDdkJBLEVBQU1SLFVBQVVJLE9BQU9QLEtBQUtZLGdCQUU5QlosS0FBS2EsUUFB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OUgsT0FBTTJILFFBQU9aLGFBQzVCekosS0FBS3FNLGFBQWF0TCxZQUFjMkIsRUFDaEMxQyxLQUFLc00sY0FBY3ZMLFlBQWNzSixFQUNqQ3JLLEtBQUt1TSxlQUFlQyxNQUFNQyxnQkFBbUIsT0FBTWhELE1BZm5EekosS0FBS3FNLGFBQWVwTCxTQUFTQyxjQUFjd0IsR0FDM0MxQyxLQUFLc00sY0FBZ0JyTCxTQUFTQyxjQUFjbUosR0FDNUNySyxLQUFLdU0sZUFBaUJ0TCxTQUFTQyxjQUFjdUksS0w4Sm5CLENBQzVCL0csS0FBTSxpQkFDTjJILE1BQU8scUJBQ1BaLE9BQVEscUJBR1ZtQyxFQUFjekYsb0JBQ2RxRixFQUFhckYsb0JBQ2J1RixFQUFldkYsb0JBQ2Z3RixFQUFnQnhGLG9CQUNoQjBGLEVBQWdCMUYsb0JBRWhCb0MsRUFBYy9GLG1CQUNkZ0csRUFBYWhHLG1CQUNiaUcsRUFBZ0JqRyxtQkFFaEJ5RSxFQUFXNUUsaUJBQWlCLFNBQVMsS0FDbkN1SixFQUFjakYsdUJBQXVCNEQsRUFBU0osZUFDOUM1QixFQUFjL0gsdUJBQ2QrSCxFQUFjeEksaUJBQ2Q2TCxFQUFjNUYsZUFHaEJrQixFQUFVN0UsaUJBQWlCLFNBQVMsS0FDbENtRyxFQUFhaEksdUJBQ2JnSSxFQUFhbEcscUJBQ2JrRyxFQUFhekksaUJBQ2J5TCxFQUFheEYsZUFFZm1CLEVBQWM5RSxpQkFBaUIsU0FBUyxLQUN0Q29HLEVBQWdCbkcscUJBQ2hCbUcsRUFBZ0JqSSx1QkFDaEJpSSxFQUFnQjFJLGlCQUNoQjhMLEVBQWdCN0YsZ0IiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vINC60LvQsNGB0YEg0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC8XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGZvcm0pIHtcclxuICAgIHRoaXMuX2Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBmb3JtW25hbWU9JHtmb3JtfV1gKTtcclxuICAgIHRoaXMuX2lucHV0ID0gZGF0YS5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gZGF0YS5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uID0gZGF0YS5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvciA9IGRhdGEuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKGRhdGEuZXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0KV07XHJcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uKTtcclxuICB9XHJcblxyXG4gIF9zaG93RXJyb3IoaW5wdXQpIHtcclxuICAgIHRoaXMuX2Vycm9yID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIHRoaXMuX2Vycm9yLnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3IpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVFcnJvcihpbnB1dCkge1xyXG4gICAgdGhpcy5fZXJyb3IgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgdGhpcy5fZXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zaG93RXJyb3IoaW5wdXQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0QnV0dG9uU3RhdGUgPSAoKSA9PiB7XHJcbiAgICBpZiAoIXRoaXMuX2NoZWNrSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b24pO1xyXG4gICAgICB0aGlzLl9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uKTtcclxuICAgICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcigpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XHJcbiAgICAgICAgdGhpcy5zZXRCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRlSW5wdXRzVmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gXCJcIjtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGl0eU1hc3NhZ2UgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZXJyb3JzLmZvckVhY2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGVycm9yLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKCk7XHJcbiAgICB0aGlzLnNldEJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG59XHJcbiIsIi8vINC60LvQsNGB0YEg0Y3Qu9C10LzQtdC90YLQsCDQutCw0YDRgtC+0YfQutC4XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBuYW1lLCBsaW5rLCBsaWtlcywgX2lkLCBvd25lciB9LFxyXG4gICAgdGVtcGxhdGUsXHJcbiAgICBteUlkLFxyXG4gICAgb3BlblBvcHVwVmlldyxcclxuICAgIG9wZW5Qb3B1cERlbGV0ZSxcclxuICAgIHB1dExpa2VDYXJkLFxyXG4gICAgZGVsZXRlTGlrZSxcclxuICAgIHNob3dFcnJvck1hc3NhZ2VcclxuICApIHtcclxuICAgIHRoaXMuX3RpdGxlID0gbmFtZTtcclxuICAgIHRoaXMuX2ltYWdlID0gbGluaztcclxuICAgIHRoaXMuX2lkID0gX2lkO1xyXG4gICAgdGhpcy5fb3duZXIgPSBvd25lcjtcclxuICAgIHRoaXMuX3RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZSk7XHJcbiAgICB0aGlzLl9vcGVuUG9wdXBWaWV3ID0gb3BlblBvcHVwVmlldztcclxuICAgIHRoaXMuX29wZW5Qb3B1cERlbGV0ZSA9IG9wZW5Qb3B1cERlbGV0ZTtcclxuICAgIHRoaXMuX3B1dExpa2VDYXJkID0gcHV0TGlrZUNhcmQ7XHJcbiAgICB0aGlzLl9kZWxldGVMaWtlID0gZGVsZXRlTGlrZTtcclxuICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XHJcbiAgICB0aGlzLl9teUlkID0gbXlJZDtcclxuICAgIHRoaXMuX3Nob3dFcnJvck1hc3NhZ2UgPSBzaG93RXJyb3JNYXNzYWdlO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50SW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9lbGVtZW50RGVzYyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19uYW1lXCIpO1xyXG4gICAgdGhpcy5fZWxlbWVudEJ0bkRlbGV0ZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG5fdHlwZV9kZWxldGVcIik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VcIik7XHJcbiAgICB0aGlzLl9saWtlQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWNvdW50ZXJcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIikuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUxpa2VUaGVDYXJkKGV2dCwgaWQpIHtcclxuICAgIGlmICh0aGlzLl9jaGVja015TGlrZSgpKSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUxpa2UoaWQpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fbGlrZXMgPSByZXMubGlrZXM7XHJcbiAgICAgICAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlX2FjdGl2ZVwiKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9zaG93RXJyb3JNYXNzYWdlKGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9wdXRMaWtlQ2FyZChpZClcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9saWtlcyA9IHJlcy5saWtlcztcclxuICAgICAgICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gcmVzLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2VfYWN0aXZlXCIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIHRoaXMuX3Nob3dFcnJvck1hc3NhZ2UoZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9jaGVja015TGlrZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChvYmopID0+IHtcclxuICAgICAgcmV0dXJuIG9iai5faWQgPT09IHRoaXMuX215SWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5zcmMgPSB0aGlzLl9pbWFnZTtcclxuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5hbHQgPSB0aGlzLl90aXRsZTtcclxuICAgIHRoaXMuX2VsZW1lbnREZXNjLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XHJcbiAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICBpZiAodGhpcy5fb3duZXIuX2lkID09PSB0aGlzLl9teUlkKSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnRCdG5EZWxldGUuY2xhc3NMaXN0LmFkZChcImJ0bl92aXNpYmxlXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuX2NoZWNrTXlMaWtlKCkpIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZV9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9vcGVuUG9wdXBWaWV3KHRoaXMuX2ltYWdlLCB0aGlzLl90aXRsZSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgdGhpcy5fdG9nZ2xlTGlrZVRoZUNhcmQoZXZ0LCB0aGlzLl9pZCwgdGhpcy5fbGlrZXMpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9lbGVtZW50QnRuRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX29wZW5Qb3B1cERlbGV0ZSh0aGlzLl9lbGVtZW50LCB0aGlzLl9pZCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLy/QvtCx0YnQuNC5INC60LvQsNGB0YEg0LTQu9GPINC/0L7Qv9Cw0L/QvtCyXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwKTtcclxuICB9XHJcblxyXG4gIG9wZW5Qb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9jbG9zZUJ5RXNjYXBlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlUG9wdXAgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fY2xvc2VCeUVzY2FwZSk7XHJcbiAgfTtcclxuXHJcbiAgX2Nsb3NlQnlFc2NhcGUgPSAoZXZ0KSA9PiB7XHJcbiAgICBjb25zdCBlc2NhcGVDb2RlID0gMjc7XHJcbiAgICBpZiAoZXZ0LmtleUNvZGUgPT09IGVzY2FwZUNvZGUpIHtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2Nsb3NlQnlDbGljayhldnQpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGV2dC50YXJnZXQ7XHJcbiAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5lZFwiKSkge1xyXG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuYnRuX3R5cGVfY2xvc2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlUG9wdXApO1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB0aGlzLl9jbG9zZUJ5Q2xpY2soZXZ0KSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG4vL9C60LvQsNGB0YEg0L/QvtC/0LDQv9C+0LIg0YEg0YTQvtGA0LzQvtC5XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBzdWJtaXRGb3JtIH0sIHBvcHVwLCByZXNldFZhbGlkaXR5TWFzc2FnZSkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5fc3VibWl0Rm9ybSA9IHN1Ym1pdEZvcm07XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX3Jlc2V0VmFsaWRpdHlNYXNzYWdlID0gcmVzZXRWYWxpZGl0eU1hc3NhZ2U7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRGb3JtKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgc2V0SW5pdGlhbElucHV0c1ZhbHVlcyh2YWx1ZXMpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpZiAodmFsdWVzW2lucHV0Lm5hbWVdKSB7XHJcbiAgICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZXNbaW5wdXQubmFtZV07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goXHJcbiAgICAgIChpbnB1dCkgPT4gKHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSlcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBjbG9zZVBvcHVwKCkge1xyXG4gICAgc3VwZXIuY2xvc2VQb3B1cCgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgdGhpcy5fcmVzZXRWYWxpZGl0eU1hc3NhZ2UoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IHtcclxuICBidXR0b25FZGl0LFxyXG4gIGJ1dHRvbkFkZCxcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gIHByb2ZpbGVBdmF0YXIsXHJcbiAgYnRuU3VibWl0RWRpdCxcclxuICBidG5TdWJtaXRBZGQsXHJcbiAgYnRuU3VibWl0RGVsZXRlLFxyXG4gIGJ0blN1Ym1pdEVkaXRBdmF0YXIsXHJcbiAgZXJyb3JUZW1wbGF0ZSxcclxuICBlcnJvcnNDb250YWluZXIsXHJcbn07XHJcblxyXG4vLyDQutC+0L3RhNC40LMg0LTQu9GPINC60LvQsNGB0YHQsCDQstCw0LvQuNC00LDRhtC40LhcclxuY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIi5wb3B1cF9fZXJyb3JcIixcclxufTtcclxuXHJcbmNvbnN0IGJ1dHRvbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ0bl90eXBlX2VkaXRcIik7IC8vINC60L3QvtC/0LrQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQv9GA0L7RhNC40LvRjFxyXG5jb25zdCBidXR0b25BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ0bl90eXBlX2FkZFwiKTsgLy8g0LrQvdC+0L/QutCwINC00L7QsdCw0LLQuNGC0Ywg0LrQsNGA0YLQvtGH0LrRg1xyXG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XHJcbmNvbnN0IGJ0blN1Ym1pdEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25fdHlwZV9lZGl0XCIpO1xyXG5jb25zdCBidG5TdWJtaXRFZGl0QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF9fYnV0dG9uX3R5cGVfZWRpdC1hdmF0YXJcIlxyXG4pO1xyXG5jb25zdCBidG5TdWJtaXRBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25fdHlwZV9hZGRcIik7XHJcbmNvbnN0IGJ0blN1Ym1pdERlbGV0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvbl90eXBlX2RlbGV0ZVwiKTtcclxuY29uc3QgZXJyb3JUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXJyb3JfX3RlbXBsYXRlXCIpO1xyXG5jb25zdCBlcnJvcnNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yc1wiKTtcclxuIiwiaW1wb3J0IHtcclxuICBidG5TdWJtaXRBZGQsXHJcbiAgYnRuU3VibWl0RGVsZXRlLFxyXG4gIGVycm9yVGVtcGxhdGUsXHJcbiAgZXJyb3JzQ29udGFpbmVyLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmV4cG9ydCB7XHJcbiAgcmVuZGVyTG9hZFRleHRCdG5FZGl0LFxyXG4gIHJlbmRlckxvYWRUZXh0QnRuQWRkLFxyXG4gIHJlbmRlckxvYWRUZXh0QnRuRGVsZXRlLFxyXG4gIHNob3dFcnJvck1hc3NhZ2UsXHJcbn07XHJcblxyXG5mdW5jdGlvbiByZW5kZXJMb2FkVGV4dEJ0bkVkaXQoaXNMb2FkaW5nLCBidG4pIHtcclxuICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICBidG4udGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCI7XHJcbiAgfSBlbHNlIHtcclxuICAgIGJ0bi50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LjRgtGMXCI7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJMb2FkVGV4dEJ0bkFkZChpc0xvYWRpbmcpIHtcclxuICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICBidG5TdWJtaXRBZGQudGV4dENvbnRlbnQgPSBcItCh0L7Qt9C00LDQvdC40LUuLi5cIjtcclxuICB9IGVsc2Uge1xyXG4gICAgYnRuU3VibWl0QWRkLnRleHRDb250ZW50ID0gXCLQodC+0LfQtNCw0YLRjFwiO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyTG9hZFRleHRCdG5EZWxldGUoaXNMb2FkaW5nKSB7XHJcbiAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgYnRuU3VibWl0RGVsZXRlLnRleHRDb250ZW50ID0gXCLQo9C00LDQu9C10L3QuNC1Li4uXCI7XHJcbiAgfSBlbHNlIHtcclxuICAgIGJ0blN1Ym1pdERlbGV0ZS50ZXh0Q29udGVudCA9IFwi0JTQsFwiO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VGVtcGxhdGVFcnJvcigpIHtcclxuICByZXR1cm4gZXJyb3JUZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXJyb3JcIikuY2xvbmVOb2RlKHRydWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFcnJvckVsZW1lbnQoZXJyKSB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZ2V0VGVtcGxhdGVFcnJvcigpO1xyXG4gIGVycm9yRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgXCIuZXJyb3JfX21hc3NhZ2VcIlxyXG4gICkudGV4dENvbnRlbnQgPSBgJHtlcnJ9LiDQp9GC0L4t0YLQviDQv9C+0YjQu9C+INC90LUg0YLQsNC6IDooYDtcclxuICByZXR1cm4gZXJyb3JFbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBoaWRlRXJyb3JNYXNzYWdlKGVycikge1xyXG4gIGVyci5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93RXJyb3JNYXNzYWdlKGVycikge1xyXG4gIGNvbnN0IGVyckVsZW0gPSBjcmVhdGVFcnJvckVsZW1lbnQoZXJyKTtcclxuICBlcnJvcnNDb250YWluZXIucHJlcGVuZChlcnJFbGVtKTtcclxuICBuZXcgUHJvbWlzZSgocmVzKSA9PiB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgZXJyRWxlbS5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgICByZXMoZXJyRWxlbSk7XHJcbiAgICB9LCAwKTtcclxuICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIGhpZGVFcnJvck1hc3NhZ2UocmVzKTtcclxuICAgICAgICAgIHJlc29sdmUocmVzKTtcclxuICAgICAgICB9LCA1MDAwKTtcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICByZXMucmVtb3ZlKCk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSk7XHJcbn1cclxuIiwiaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiOyAvLyDQuNC80L/QvtGA0YIg0LrQu9Cw0YHRgdCwINCy0LDQu9C40LTQsNGG0LjQuCDRhNC+0YDQvFxyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7IC8vINC40LzQv9C+0YDRgiDQutC70LDRgdGB0LAg0Y3Qu9C10LzQtdC90YLQsCDQutCw0YDRgtC+0YfQutC4XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjsgLy8g0LjQvNC/0L7RgNGCINC60LvQsNGB0YHQsCDQvtGC0YDQuNGB0L7QstC60Lgg0Y3Qu9C10LzQtdC90YLQvtCyXHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiOyAvLyDQuNC80L/QvtGA0YIg0LrQu9Cw0YHRgdCwINC/0L7Qv9Cw0L/QsCDRg9Cy0LXQu9C40YfQtdC90L3QvtC5INC60LDRgNGC0LjQvdC60LhcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiOyAvLyDQuNC80L/QvtGA0YIg0LrQu9Cw0YHRgdCwINC/0L7QsNC/0LAg0YEg0YTQvtGA0LzQvtC5XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiOyAvLyDQuNC80L/QvtGA0YIg0LrQu9Cw0YHRgdCwINGD0L/RgNCw0LLQu9GP0Y7RidC10LPQviDQvtGC0L7QsdGA0LDQttC10L3QuNC10Lwg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L/RgNC+0YTQuNC70Y9cclxuaW1wb3J0IFBvcHVwV2l0aERlbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanNcIjtcclxuaW1wb3J0IHtcclxuICByZW5kZXJMb2FkVGV4dEJ0bkVkaXQsXHJcbiAgcmVuZGVyTG9hZFRleHRCdG5BZGQsXHJcbiAgc2hvd0Vycm9yTWFzc2FnZSxcclxuICByZW5kZXJMb2FkVGV4dEJ0bkRlbGV0ZSxcclxufSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IHtcclxuICBidXR0b25FZGl0LFxyXG4gIGJ1dHRvbkFkZCxcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gIHByb2ZpbGVBdmF0YXIsXHJcbiAgYnRuU3VibWl0RWRpdCxcclxuICBidG5TdWJtaXRFZGl0QXZhdGFyLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjsgLy/QuNC80L/QvtGA0YIgRE9NINGN0LvQtdC80LXQvdGC0L7QsiDRgdGC0YDQsNC90LjRhtGLXHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcblxyXG5sZXQgdXNlcklkO1xyXG5cclxuY29uc3QgdmFsaWRhdG9yRWRpdCA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIFwiZWRpdC1wcm9maWxlXCIpOyAvL9Cy0LrQu9GO0YfQtdC90LjQtSDQstCw0LvQuNC00LDRhtC40Lgg0YTQvtGA0LzRiyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXHJcbmNvbnN0IHZhbGlkYXRvckFkZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIFwiYWRkLW5ldy1jYXJkXCIpOyAvLyDQstC60LvRjtGH0LXQvdC40LUg0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC80Ysg0LTQvtCx0LDQstC70LXQvdC40Y8g0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4XHJcbmNvbnN0IHZhbGlkYXRvckF2YXRhciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIFwiY2hhbmdlLWF2YXRhclwiKTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoXHJcbiAge1xyXG4gICAgYmFzZVVybDogXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTIwXCIsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgIGF1dGhvcml6YXRpb246IFwiNzlhY2NmOGYtY2M3Ni00MDMzLTg0ZjktMmQxZDgxYzMwMTU3XCIsXHJcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgfSxcclxuICB9LFxyXG4gIHJlbmRlckxvYWRUZXh0QnRuRWRpdCxcclxuICByZW5kZXJMb2FkVGV4dEJ0bkFkZCxcclxuICByZW5kZXJMb2FkVGV4dEJ0bkRlbGV0ZSxcclxuICBidG5TdWJtaXRFZGl0LFxyXG4gIGJ0blN1Ym1pdEVkaXRBdmF0YXJcclxuKTtcclxuLy/Qv9C+0LvRg9GH0LXQvdC40LUg0Lgg0YPRgdGC0LDQvdC+0LLQutCwINC90LDRh9Cw0LvRjNC90L7QuSDQuNC90YTQvtGA0LzQsNGG0LjQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuYXBpXHJcbiAgLmdldFVzZXJJbmZvKClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICB1c2VySWQgPSByZXMuX2lkO1xyXG4gICAgdXNlc0luZm8uc2V0VXNlckluZm8ocmVzKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBzaG93RXJyb3JNYXNzYWdlKGVycik7XHJcbiAgfSk7XHJcblxyXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoaXRlbSk7XHJcbiAgICAgIGNhcmRzTGlzdC5hcHBlbmRJdGVtKGNhcmQuZ2VuZXJhdGVDYXJkKCkpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLmNhcmRzXCJcclxuKTtcclxuLy/QuNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQvdCw0YfQsNC70YzQvdC+0LPQviDRgdC/0LjRgdC60LAg0LrQsNGA0YLQvtGH0LXQulxyXG5hcGlcclxuICAuZ2V0SW5pdGlhbENhcmRzKClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICBjYXJkc0xpc3QucmVuZGVySXRlbXMocmVzKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBzaG93RXJyb3JNYXNzYWdlKGVycik7XHJcbiAgfSk7XHJcblxyXG5jb25zdCBwb3B1cFR5cGVBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBzdWJtaXRGb3JtOiAoaXRlbSkgPT4ge1xyXG4gICAgICBhcGlcclxuICAgICAgICAucG9zdE5ld0NhcmQoaXRlbSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChyZXMpO1xyXG4gICAgICAgICAgY2FyZHNMaXN0LnByZXBlbmRJdGVtKGNhcmQuZ2VuZXJhdGVDYXJkKCkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIHNob3dFcnJvck1hc3NhZ2UoZXJyKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgIHJlbmRlckxvYWRUZXh0QnRuQWRkKGZhbHNlKTtcclxuICAgICAgICAgIHBvcHVwVHlwZUFkZC5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIucG9wdXBfdHlwZV9hZGRcIixcclxuICB2YWxpZGF0b3JBZGQucmVzZXRWYWxpZGl0eU1hc3NhZ2VcclxuKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gIHJldHVybiBuZXcgQ2FyZChcclxuICAgIGRhdGEsXHJcbiAgICBcIi50ZW1wbGF0ZVwiLFxyXG4gICAgdXNlcklkLFxyXG4gICAgcG9wdXBUeXBlSW1hZ2Uub3BlblBvcHVwLFxyXG4gICAgcG9wdXBUeXBlRGVsZXRlLm9wZW5Qb3B1cCxcclxuICAgIGFwaS5wdXRMaWtlQ2FyZCxcclxuICAgIGFwaS5kZWxldGVMaWtlLFxyXG4gICAgc2hvd0Vycm9yTWFzc2FnZVxyXG4gICk7XHJcbn1cclxuXHJcbi8v0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/QvtC/0LDQv9CwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cclxuY29uc3QgcG9wdXBUeXBlRWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHtcclxuICAgIHN1Ym1pdEZvcm06IChpdGVtKSA9PiB7XHJcbiAgICAgIGFwaVxyXG4gICAgICAgIC5wYXRoVXNlckluZm8oaXRlbSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICB1c2VzSW5mby5zZXRVc2VySW5mbyhyZXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIHNob3dFcnJvck1hc3NhZ2UoZXJyKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgIHJlbmRlckxvYWRUZXh0QnRuRWRpdChmYWxzZSwgYnRuU3VibWl0RWRpdCk7XHJcbiAgICAgICAgICBwb3B1cFR5cGVFZGl0LmNsb3NlUG9wdXAoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIi5wb3B1cF90eXBlX2VkaXRcIixcclxuICB2YWxpZGF0b3JFZGl0LnJlc2V0VmFsaWRpdHlNYXNzYWdlXHJcbik7XHJcbi8v0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/QvtC/0LDQv9CwINC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCBwb3B1cFR5cGVBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBzdWJtaXRGb3JtOiAoaXRlbSkgPT4ge1xyXG4gICAgICBhcGlcclxuICAgICAgICAucGF0Y2hBdmF0YXIoaXRlbS5saW5rKVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgIHVzZXNJbmZvLnNldFVzZXJJbmZvKHJlcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgc2hvd0Vycm9yTWFzc2FnZShlcnIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgcG9wdXBUeXBlQXZhdGFyLmNsb3NlUG9wdXAoKTtcclxuICAgICAgICAgIHJlbmRlckxvYWRUZXh0QnRuRWRpdChmYWxzZSwgYnRuU3VibWl0RWRpdEF2YXRhcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIucG9wdXBfdHlwZV9hdmF0YXJcIixcclxuICB2YWxpZGF0b3JBdmF0YXIucmVzZXRWYWxpZGl0eU1hc3NhZ2VcclxuKTtcclxuLy/QuNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQv9C+0L/QsNC/0LAg0YPQstC10LvQuNGH0LXQvdC90L7QuSDQutCw0YDRgtC40L3QutC4XHJcbmNvbnN0IHBvcHVwVHlwZUltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX3R5cGVfaW1nXCIpO1xyXG5cclxuY29uc3QgcG9wdXBUeXBlRGVsZXRlID0gbmV3IFBvcHVwV2l0aERlbGV0ZShcclxuICBcIi5wb3B1cF90eXBlX2RlbGV0ZVwiLFxyXG4gIGFwaS5kZWxldGVDYXJkLFxyXG4gIHJlbmRlckxvYWRUZXh0QnRuRGVsZXRlLFxyXG4gIHNob3dFcnJvck1hc3NhZ2VcclxuKTtcclxuXHJcbi8v0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0YPQv9GA0LDQstC70LXQvdC40Y8g0LjQvdGE0L7RgNCw0YbQuNC10Lkg0L/RgNC+0YTQuNC70Y9cclxuY29uc3QgdXNlc0luZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWU6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBhYm91dDogXCIucHJvZmlsZV9fYWJvdXQtbWVcIixcclxuICBhdmF0YXI6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxyXG59KTtcclxuXHJcbnBvcHVwVHlwZUVkaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBUeXBlQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwVHlwZUltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwVHlwZURlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFR5cGVBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnZhbGlkYXRvckVkaXQuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG52YWxpZGF0b3JBZGQuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG52YWxpZGF0b3JBdmF0YXIuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuYnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwVHlwZUVkaXQuc2V0SW5pdGlhbElucHV0c1ZhbHVlcyh1c2VzSW5mby5nZXRVc2VySW5mbygpKTtcclxuICB2YWxpZGF0b3JFZGl0LnJlc2V0VmFsaWRpdHlNYXNzYWdlKCk7XHJcbiAgdmFsaWRhdG9yRWRpdC5zZXRCdXR0b25TdGF0ZSgpO1xyXG4gIHBvcHVwVHlwZUVkaXQub3BlblBvcHVwKCk7XHJcbn0pO1xyXG5cclxuYnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgdmFsaWRhdG9yQWRkLnJlc2V0VmFsaWRpdHlNYXNzYWdlKCk7XHJcbiAgdmFsaWRhdG9yQWRkLnJlc2V0ZUlucHV0c1ZhbHVlcygpO1xyXG4gIHZhbGlkYXRvckFkZC5zZXRCdXR0b25TdGF0ZSgpO1xyXG4gIHBvcHVwVHlwZUFkZC5vcGVuUG9wdXAoKTtcclxufSk7XHJcbnByb2ZpbGVBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICB2YWxpZGF0b3JBdmF0YXIucmVzZXRlSW5wdXRzVmFsdWVzKCk7XHJcbiAgdmFsaWRhdG9yQXZhdGFyLnJlc2V0VmFsaWRpdHlNYXNzYWdlKCk7XHJcbiAgdmFsaWRhdG9yQXZhdGFyLnNldEJ1dHRvblN0YXRlKCk7XHJcbiAgcG9wdXBUeXBlQXZhdGFyLm9wZW5Qb3B1cCgpO1xyXG59KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgYmFzZVVybCwgaGVhZGVycyB9LFxyXG4gICAgcmVuZGVyTG9hZFRleHRCdG5FZGl0LFxyXG4gICAgcmVuZGVyTG9hZFRleHRCdG5BZGQsXHJcbiAgICByZW5kZXJMb2FkVGV4dEJ0bkRlbGV0ZSxcclxuICAgIGJ0blN1Ym1pdEVkaXQsXHJcbiAgICBidG5TdWJtaXRFZGl0QXZhdGFyXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2F1dGhvcml6YXRpb24gPSBoZWFkZXJzLmF1dGhvcml6YXRpb247XHJcbiAgICB0aGlzLl9jb250ZW50VHlwZSA9IGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl07XHJcbiAgICB0aGlzLl9yZW5kZXJMb2FkVGV4dEJ0bkVkaXQgPSByZW5kZXJMb2FkVGV4dEJ0bkVkaXQ7XHJcbiAgICB0aGlzLl9yZW5kZXJMb2FkVGV4dEJ0bkFkZCA9IHJlbmRlckxvYWRUZXh0QnRuQWRkO1xyXG4gICAgdGhpcy5fcmVuZGVyTG9hZFRleHRCdG5EZWxldGUgPSByZW5kZXJMb2FkVGV4dEJ0bkRlbGV0ZTtcclxuICAgIHRoaXMuX2J0blN1Ym1pdEVkaXQgPSBidG5TdWJtaXRFZGl0O1xyXG4gICAgdGhpcy5fYnRuU3VibWl0RWRpdEF2YXRhciA9IGJ0blN1Ym1pdEVkaXRBdmF0YXI7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgIH0sXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHBhdGhVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHRoaXMuX3JlbmRlckxvYWRUZXh0QnRuRWRpdCh0cnVlLCB0aGlzLl9idG5TdWJtaXRFZGl0KTtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IHRoaXMuX2NvbnRlbnRUeXBlLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwb3N0TmV3Q2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgdGhpcy5fcmVuZGVyTG9hZFRleHRCdG5BZGQodHJ1ZSk7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IHRoaXMuX2NvbnRlbnRUeXBlLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcGF0Y2hBdmF0YXIgPSAobGluaykgPT4ge1xyXG4gICAgdGhpcy5fcmVuZGVyTG9hZFRleHRCdG5FZGl0KHRydWUsIHRoaXMuX2J0blN1Ym1pdEVkaXRBdmF0YXIpO1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IHRoaXMuX2NvbnRlbnRUeXBlLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGRlbGV0ZUNhcmQgPSAoaWQpID0+IHtcclxuICAgIHRoaXMuX3JlbmRlckxvYWRUZXh0QnRuRGVsZXRlKHRydWUpO1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBwdXRMaWtlQ2FyZCA9IChpZCkgPT4ge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZGVsZXRlTGlrZSA9IChpZCkgPT4ge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfTtcclxufVxyXG4iLCIvL9C60LvQsNGB0YEg0LPQtdC90LXRgNCw0YbQuNC4INGB0LXQutGG0LjQuFxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgYXBwZW5kSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcHJlcGVuZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG4vL9C60LvQsNGB0YEg0L/QvtC/0LDQv9CwINGD0LLQtdC70LjRh9C10L3QvdC+0LPQviDQuNC30L7QsdGA0LDQttC10L3QuNGPXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwKSB7XHJcbiAgICBzdXBlcihwb3B1cCk7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fZGVzYyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Rlc2NyaXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlblBvcHVwID0gKGxpbmssIG5hbWUpID0+IHtcclxuICAgIHN1cGVyLm9wZW5Qb3B1cCgpO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2Rlc2MudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcclxuICB9O1xyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRGVsZXRlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcG9wdXAsXHJcbiAgICBoYW5kbGVEZWxldGVDYXJkLFxyXG4gICAgcmVuZGVyTG9hZFRleHRCdG5EZWxldGUsXHJcbiAgICBzaG93RXJyb3JNYXNzYWdlXHJcbiAgKSB7XHJcbiAgICBzdXBlcihwb3B1cCk7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gaGFuZGxlRGVsZXRlQ2FyZDtcclxuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKTtcclxuICAgIHRoaXMuX3JlbmRlckxvYWRUZXh0QnRuRGVsZXRlID0gcmVuZGVyTG9hZFRleHRCdG5EZWxldGU7XHJcbiAgICB0aGlzLl9zaG93RXJyb3JNYXNzYWdlID0gc2hvd0Vycm9yTWFzc2FnZTtcclxuICB9XHJcblxyXG4gIF9kZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyTG9hZFRleHRCdG5EZWxldGUodHJ1ZSk7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKHRoaXMuX2lkKVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIHRoaXMuX3Nob3dFcnJvck1hc3NhZ2UoZXJyKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3JlbmRlckxvYWRUZXh0QnRuRGVsZXRlKGZhbHNlKTtcclxuICAgICAgICB0aGlzLl9jYXJkLnJlbW92ZSgpO1xyXG4gICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9kZWxldGVDYXJkKCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBvcGVuUG9wdXAgPSAoY2FyZCwgaWQpID0+IHtcclxuICAgIHN1cGVyLm9wZW5Qb3B1cCgpO1xyXG4gICAgdGhpcy5fY2FyZCA9IGNhcmQ7XHJcbiAgICB0aGlzLl9pZCA9IGlkO1xyXG4gIH07XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZSk7XHJcbiAgICB0aGlzLl9wcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0KTtcclxuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbyA9ICgpID0+IHtcclxuICAgIHRoaXMuX3Byb2ZpbGVWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX3Byb2ZpbGVWYWx1ZXMubmFtZSA9IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gICAgdGhpcy5fcHJvZmlsZVZhbHVlcy5hYm91dCA9IHRoaXMuX3Byb2ZpbGVBYm91dC50ZXh0Q29udGVudDtcclxuICAgIHJldHVybiB0aGlzLl9wcm9maWxlVmFsdWVzO1xyXG4gIH07XHJcblxyXG4gIHNldFVzZXJJbmZvID0gKHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KSA9PiB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcm9maWxlQWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2F2YXRhcn0pYDtcclxuICB9O1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=