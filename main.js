(()=>{"use strict";class e{constructor(e,t){this.setButtonState=()=>{this._checkInvalidInput()?(this._button.classList.add(this._inactiveButton),this._button.disabled=!0):(this._button.classList.remove(this._inactiveButton),this._button.disabled=!1)},this.resetValidityMassage=()=>{this._inputList.forEach((e=>{e.classList.remove(this._inputError)})),this._errors.forEach((e=>{e.textContent=""}))},this._form=document.querySelector(`form[name=${t}]`),this._input=e.inputSelector,this._submitButton=e.submitButtonSelector,this._inactiveButton=e.inactiveButtonClass,this._inputError=e.inputErrorClass,this._errors=this._form.querySelectorAll(e.errorClass),this._inputList=[...this._form.querySelectorAll(this._input)],this._button=this._form.querySelector(this._submitButton)}_showError(e){this._error=this._form.querySelector(`#${e.id}-error`),this._error.textContent=e.validationMessage,e.classList.add(this._inputError)}_hideError(e){this._error=this._form.querySelector(`#${e.id}-error`),this._error.textContent="",e.classList.remove(this._inputError)}_checkInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideError(e):this._showError(e)}_setEventListener(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.setButtonState()}))}))}reseteInputsValues(){this._inputList.forEach((e=>{e.value=""}))}enableValidation(){this._setEventListener(),this.setButtonState()}}class t{constructor({name:e,link:t,likes:s,_id:i,owner:r},n,o,{handleImageClick:a,handleDeleteClick:h,handleLikeClick:l}){this._deleteTheLike=e=>{this._likes=e.likes,this._likeCounter.textContent=e.likes.length,this._likeButton.classList.remove("card__like_active")},this._addTheLike=e=>{this._likes=e.likes,this._likeCounter.textContent=e.likes.length,this._likeButton.classList.add("card__like_active")},this._checkMyLike=()=>this._likes.some((e=>e._id===this._myId)),this._title=e,this._image=t,this._id=i,this._owner=r,this._template=document.querySelector(n),this._likes=s,this._myId=o,this._handleImageClick=a,this._handleDeleteClick=h,this._handleLikeClick=l,this._element=this._getTemplate(),this._elementImage=this._element.querySelector(".card__image"),this._elementDesc=this._element.querySelector(".card__name"),this._elementBtnDelete=this._element.querySelector(".btn_type_delete"),this._likeButton=this._element.querySelector(".card__like"),this._likeCounter=this._element.querySelector(".card__like-counter")}_getTemplate(){return this._template.content.querySelector(".card").cloneNode(!0)}generateCard(){return this._elementImage.src=this._image,this._elementImage.alt=this._title,this._elementDesc.textContent=this._title,this._likeCounter.textContent=this._likes.length,this._setEventListeners(),this._owner._id===this._myId&&this._elementBtnDelete.classList.add("btn_visible"),this._checkMyLike()&&this._likeButton.classList.add("card__like_active"),this._element}_setEventListeners(){this._elementImage.addEventListener("click",(()=>{this._handleImageClick(this._image,this._title)})),this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this._checkMyLike(),this._id,this._deleteTheLike,this._addTheLike)})),this._elementBtnDelete.addEventListener("click",(()=>{this._handleDeleteClick(this._element,this._id)}))}}class s{constructor(e){this.closePopup=()=>{this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._closeByEscape)},this._closeByEscape=e=>{"Escape"==e.key&&this.closePopup()},this._popup=document.querySelector(e)}openPopup(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._closeByEscape)}_closeByClick(e){e.target.classList.contains("popup_opened")&&this.closePopup()}setEventListeners(){this._popup.querySelector(".btn_type_close").addEventListener("click",this.closePopup),this._popup.addEventListener("mousedown",(e=>this._closeByClick(e)))}}class i extends s{constructor({submitForm:e},t){super(t),this.setEventListeners=()=>{super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._submitForm(this._getInputValues())}))},this._submitForm=e,this._inputList=this._popup.querySelectorAll(".popup__input"),this._form=this._popup.querySelector(".popup__form")}setInitialInputsValues(e){this._inputList.forEach((t=>{e[t.name]&&(t.value=e[t.name])}))}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>this._formValues[e.name]=e.value)),this._formValues}}const r={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:".popup__error"},n=document.querySelector(".btn_type_edit"),o=document.querySelector(".btn_type_add"),a=document.querySelector(".profile__avatar"),h=document.querySelector(".popup__button_type_edit"),l=document.querySelector(".popup__button_type_edit-avatar"),_=document.querySelector(".popup__button_type_add"),u=document.querySelector(".popup__button_type_delete"),p=document.querySelector(".error__template"),c=document.querySelector(".errors"),d=document.querySelectorAll(".load-wraper");function m(e){e?d.forEach((e=>{e.classList.add("display")})):(d.forEach((e=>{e.classList.remove("display")})),a.classList.add("display"))}function y(e,t){t.textContent=e?"Сохранение...":"Сохранить"}function k(e){_.textContent=e?"Создание...":"Создать"}function L(e){u.textContent=e?"Удаление...":"Да"}function f(e){const t=function(e){const t=p.content.querySelector(".error").cloneNode(!0);return t.querySelector(".error__massage").textContent=`${e}. Что-то пошло не так :(`,t}(e);c.prepend(t),new Promise((e=>{setTimeout((()=>{t.classList.add("popup_opened"),e(t)}),0)})).then((e=>new Promise((t=>{setTimeout((()=>{!function(e){e.classList.remove("popup_opened")}(e),t(e)}),5e3)})))).then((e=>{setTimeout((()=>{e.remove()}),1e3)}))}let v;const b=new e(r,"edit-profile"),E=new e(r,"add-new-card"),C=new e(r,"change-avatar"),S=new class{constructor({baseUrl:e,headers:t},s,i,r,n,o,a){this.patchAvatar=e=>(this._renderLoadTextBtnEdit(!0,this._btnSubmitEditAvatar),fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":this._contentType},body:JSON.stringify({avatar:e})}).then((e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`)))),this.deleteCard=e=>(this._renderLoadTextBtnDelete(!0),fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:{authorization:this._authorization}}).then((e=>e.ok?e:Promise.reject(`Ошибка: ${e.status}`)))),this.putLikeCard=e=>fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:{authorization:this._authorization}}).then((e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`))),this.deleteLike=e=>fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:{authorization:this._authorization}}).then((e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`))),this._baseUrl=e,this._authorization=t.authorization,this._contentType=t["Content-Type"],this._renderLoadTextBtnEdit=s,this._renderLoadTextBtnAdd=i,this._renderLoadTextBtnDelete=r,this._displayLoadWrapper=n,this._btnSubmitEdit=o,this._btnSubmitEditAvatar=a}getInitialCards(){return this._displayLoadWrapper(!0),fetch(`${this._baseUrl}/cards`,{headers:{authorization:this._authorization}}).then((e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`)))}getUserInfo(){return this._displayLoadWrapper(!0),fetch(`${this._baseUrl}/users/me`,{headers:{authorization:this._authorization}}).then((e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`)))}pathUserInfo(e){return this._renderLoadTextBtnEdit(!0,this._btnSubmitEdit),fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":this._contentType},body:JSON.stringify(e)}).then((e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`)))}postNewCard(e){return this._renderLoadTextBtnAdd(!0),fetch(`${this._baseUrl}/cards`,{method:"POST",headers:{authorization:this._authorization,"Content-Type":this._contentType},body:JSON.stringify(e)}).then((e=>e.ok?e.json():Promise.reject(`Ошибка: ${e.status}`)))}}({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-20",headers:{authorization:"79accf8f-cc76-4033-84f9-2d1d81c30157","Content-Type":"application/json"}},y,k,L,m,h,l);Promise.all([S.getUserInfo(),S.getInitialCards()]).then((([e,t])=>{v=e._id,x.setUserInfo(e),g.renderItems(t)})).catch((e=>{f(e)})).finally((()=>{m(!1)}));const g=new class{constructor({renderer:e},t){this._renderer=e,this._container=document.querySelector(t)}renderItems(e){e.forEach((e=>this._renderer(e)))}appendItem(e){this._container.append(e)}prependItem(e){this._container.prepend(e)}}({renderer:e=>{const t=I(e);g.appendItem(t.generateCard())}},".cards"),I=e=>new t(e,".template",v,{handleImageClick:(e,t)=>{T.openPopup(e,t)},handleDeleteClick:(e,t)=>{w.openPopup(e,t)},handleLikeClick:(e,t,s,i)=>{e?S.deleteLike(t).then((e=>{s(e)})).catch((e=>{f(e)})):S.putLikeCard(t).then((e=>{i(e)})).catch((e=>{f(e)}))}}),q=new i({submitForm:e=>{S.postNewCard(e).then((e=>{const t=I(e);g.prependItem(t.generateCard())})).catch((e=>{f(e)})).finally((()=>{k(!1),q.closePopup()}))}},".popup_type_add"),B=new i({submitForm:e=>{S.pathUserInfo(e).then((e=>{x.setUserInfo(e)})).catch((e=>{f(e)})).finally((()=>{y(!1,h),B.closePopup()}))}},".popup_type_edit"),P=new i({submitForm:e=>{S.patchAvatar(e.link).then((e=>{x.setUserInfo(e)})).catch((e=>{f(e)})).finally((()=>{P.closePopup(),y(!1,l)}))}},".popup_type_avatar"),T=new class extends s{constructor(e){super(e),this.openPopup=(e,t)=>{super.openPopup(),this._image.src=e,this._desc.textContent=t,this._image.alt=t},this._image=this._popup.querySelector(".popup__image"),this._desc=this._popup.querySelector(".popup__description")}}(".popup_type_img"),w=new class extends s{constructor(e,{handleDeleteCard:t}){super(e),this.setEventListeners=()=>{super.setEventListeners(),this._buttonDelete.addEventListener("click",(()=>{this._handleDeleteCard(this._id,this._card)}))},this.openPopup=(e,t)=>{super.openPopup(),this._card=e,this._id=t},this._handleDeleteCard=t,this._buttonDelete=this._popup.querySelector(".popup__button")}}(".popup_type_delete",{handleDeleteCard:(e,t)=>{L(!0),S.deleteCard(e).catch((e=>{f(e)})).finally((()=>{L(!1),t.remove(),w.closePopup()}))}}),x=new class{constructor({name:e,about:t,avatar:s}){this.getUserInfo=()=>(this._profileValues={},this._profileValues.name=this._profileName.textContent,this._profileValues.about=this._profileAbout.textContent,this._profileValues),this.setUserInfo=({name:e,about:t,avatar:s})=>{this._profileName.textContent=e,this._profileAbout.textContent=t,this._profileAvatar.style.backgroundImage=`url(${s})`},this._profileName=document.querySelector(e),this._profileAbout=document.querySelector(t),this._profileAvatar=document.querySelector(s)}}({name:".profile__name",about:".profile__about-me",avatar:".profile__avatar"});B.setEventListeners(),q.setEventListeners(),T.setEventListeners(),w.setEventListeners(),P.setEventListeners(),b.enableValidation(),E.enableValidation(),C.enableValidation(),n.addEventListener("click",(()=>{B.setInitialInputsValues(x.getUserInfo()),b.resetValidityMassage(),b.setButtonState(),B.openPopup()})),o.addEventListener("click",(()=>{E.resetValidityMassage(),E.reseteInputsValues(),E.setButtonState(),q.openPopup()})),a.addEventListener("click",(()=>{C.reseteInputsValues(),C.resetValidityMassage(),C.setButtonState(),P.openPopup()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJmb3JtIiwic2V0QnV0dG9uU3RhdGUiLCJ0aGlzIiwiX2NoZWNrSW52YWxpZElucHV0IiwiX2J1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsIl9pbmFjdGl2ZUJ1dHRvbiIsImRpc2FibGVkIiwicmVtb3ZlIiwicmVzZXRWYWxpZGl0eU1hc3NhZ2UiLCJfaW5wdXRMaXN0IiwiZm9yRWFjaCIsImlucHV0IiwiX2lucHV0RXJyb3IiLCJfZXJyb3JzIiwiZXJyb3IiLCJ0ZXh0Q29udGVudCIsIl9mb3JtIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2lucHV0IiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZXJyb3JDbGFzcyIsIl9zaG93RXJyb3IiLCJfZXJyb3IiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVFcnJvciIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc2V0ZUlucHV0c1ZhbHVlcyIsInZhbHVlIiwiZW5hYmxlVmFsaWRhdGlvbiIsIkNhcmQiLCJuYW1lIiwibGluayIsImxpa2VzIiwiX2lkIiwib3duZXIiLCJ0ZW1wbGF0ZSIsIm15SWQiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJfZGVsZXRlVGhlTGlrZSIsInJlcyIsIl9saWtlcyIsIl9saWtlQ291bnRlciIsImxlbmd0aCIsIl9saWtlQnV0dG9uIiwiX2FkZFRoZUxpa2UiLCJfY2hlY2tNeUxpa2UiLCJvYmoiLCJfbXlJZCIsIl90aXRsZSIsIl9pbWFnZSIsIl9vd25lciIsIl90ZW1wbGF0ZSIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2VsZW1lbnRJbWFnZSIsIl9lbGVtZW50RGVzYyIsIl9lbGVtZW50QnRuRGVsZXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsImdlbmVyYXRlQ2FyZCIsInNyYyIsImFsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsIlBvcHVwIiwicG9wdXAiLCJjbG9zZVBvcHVwIiwiX3BvcHVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9jbG9zZUJ5RXNjYXBlIiwiZXZ0Iiwia2V5Iiwib3BlblBvcHVwIiwiX2Nsb3NlQnlDbGljayIsInRhcmdldCIsImNvbnRhaW5zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Rm9ybSIsInN1cGVyIiwicHJldmVudERlZmF1bHQiLCJfc3VibWl0Rm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsInNldEluaXRpYWxJbnB1dHNWYWx1ZXMiLCJ2YWx1ZXMiLCJfZm9ybVZhbHVlcyIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJidXR0b25FZGl0IiwiYnV0dG9uQWRkIiwicHJvZmlsZUF2YXRhciIsImJ0blN1Ym1pdEVkaXQiLCJidG5TdWJtaXRFZGl0QXZhdGFyIiwiYnRuU3VibWl0QWRkIiwiYnRuU3VibWl0RGVsZXRlIiwiZXJyb3JUZW1wbGF0ZSIsImVycm9yc0NvbnRhaW5lciIsImxvYWRXcmFwcGVycyIsImRpc3BsYXlMb2FkV3JhcHBlciIsImlzRGlzcGxheSIsIndyYXBlciIsInJlbmRlckxvYWRUZXh0QnRuRWRpdCIsImlzTG9hZGluZyIsImJ0biIsInJlbmRlckxvYWRUZXh0QnRuQWRkIiwicmVuZGVyTG9hZFRleHRCdG5EZWxldGUiLCJzaG93RXJyb3JNYXNzYWdlIiwiZXJyIiwiZXJyRWxlbSIsImVycm9yRWxlbWVudCIsImNyZWF0ZUVycm9yRWxlbWVudCIsIlByb21pc2UiLCJzZXRUaW1lb3V0IiwidGhlbiIsInJlc29sdmUiLCJoaWRlRXJyb3JNYXNzYWdlIiwidXNlcklkIiwidmFsaWRhdG9yRWRpdCIsInZhbGlkYXRvckFkZCIsInZhbGlkYXRvckF2YXRhciIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwicGF0Y2hBdmF0YXIiLCJfcmVuZGVyTG9hZFRleHRCdG5FZGl0IiwiX2J0blN1Ym1pdEVkaXRBdmF0YXIiLCJmZXRjaCIsIl9iYXNlVXJsIiwibWV0aG9kIiwiYXV0aG9yaXphdGlvbiIsIl9hdXRob3JpemF0aW9uIiwiX2NvbnRlbnRUeXBlIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdmF0YXIiLCJvayIsImpzb24iLCJyZWplY3QiLCJzdGF0dXMiLCJkZWxldGVDYXJkIiwiX3JlbmRlckxvYWRUZXh0QnRuRGVsZXRlIiwicHV0TGlrZUNhcmQiLCJkZWxldGVMaWtlIiwiX3JlbmRlckxvYWRUZXh0QnRuQWRkIiwiX2Rpc3BsYXlMb2FkV3JhcHBlciIsIl9idG5TdWJtaXRFZGl0IiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJwYXRoVXNlckluZm8iLCJwb3N0TmV3Q2FyZCIsImFsbCIsImluZm8iLCJjYXJkcyIsInVzZXNJbmZvIiwic2V0VXNlckluZm8iLCJjYXJkc0xpc3QiLCJyZW5kZXJJdGVtcyIsImNhdGNoIiwiZmluYWxseSIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbXMiLCJpdGVtIiwiYXBwZW5kSXRlbSIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kSXRlbSIsInByZXBlbmQiLCJjYXJkIiwiY3JlYXRlQ2FyZCIsImltYWdlIiwidGl0bGUiLCJwb3B1cFR5cGVJbWFnZSIsInBvcHVwVHlwZURlbGV0ZSIsIm15TGlrZSIsImRlbGV0ZVRoZUxpa2UiLCJhZGRUaGVMaWtlIiwicG9wdXBUeXBlQWRkIiwicG9wdXBUeXBlRWRpdCIsInBvcHVwVHlwZUF2YXRhciIsIl9kZXNjIiwiaGFuZGxlRGVsZXRlQ2FyZCIsIl9idXR0b25EZWxldGUiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkIiwiYWJvdXQiLCJfcHJvZmlsZVZhbHVlcyIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlQWJvdXQiLCJfcHJvZmlsZUF2YXRhciIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIl0sIm1hcHBpbmdzIjoibUJBQ2UsTUFBTUEsRUFDbkJDLFlBQVlDLEVBQU1DLEdBQU0sS0FxQ3hCQyxlQUFpQixLQUNWQyxLQUFLQyxzQkFJUkQsS0FBS0UsUUFBUUMsVUFBVUMsSUFBSUosS0FBS0ssaUJBQ2hDTCxLQUFLRSxRQUFRSSxVQUFXLElBSnhCTixLQUFLRSxRQUFRQyxVQUFVSSxPQUFPUCxLQUFLSyxpQkFDbkNMLEtBQUtFLFFB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uCDRhNC+0YDQvFxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgZm9ybVtuYW1lPSR7Zm9ybX1dYCk7XHJcbiAgICB0aGlzLl9pbnB1dCA9IGRhdGEuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IGRhdGEuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbiA9IGRhdGEuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3IgPSBkYXRhLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9ycyA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChkYXRhLmVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dCldO1xyXG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvbik7XHJcbiAgfVxyXG5cclxuICBfc2hvd0Vycm9yKGlucHV0KSB7XHJcbiAgICB0aGlzLl9lcnJvciA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICB0aGlzLl9lcnJvci50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yKTtcclxuICB9XHJcblxyXG4gIF9oaWRlRXJyb3IoaW5wdXQpIHtcclxuICAgIHRoaXMuX2Vycm9yID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIHRoaXMuX2Vycm9yLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvcik7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcclxuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEJ1dHRvblN0YXRlID0gKCkgPT4ge1xyXG4gICAgaWYgKCF0aGlzLl9jaGVja0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uKTtcclxuICAgICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbik7XHJcbiAgICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXIoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuc2V0QnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlc2V0ZUlucHV0c1ZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRpdHlNYXNzYWdlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvcik7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2Vycm9ycy5mb3JFYWNoKChlcnJvcikgPT4ge1xyXG4gICAgICBlcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcigpO1xyXG4gICAgdGhpcy5zZXRCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxufVxyXG4iLCIvLyDQutC70LDRgdGBINGN0LvQtdC80LXQvdGC0LAg0LrQsNGA0YLQvtGH0LrQuFxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgbmFtZSwgbGluaywgbGlrZXMsIF9pZCwgb3duZXIgfSxcclxuICAgIHRlbXBsYXRlLFxyXG4gICAgbXlJZCxcclxuICAgIHsgaGFuZGxlSW1hZ2VDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2ssIGhhbmRsZUxpa2VDbGljayB9XHJcbiAgKSB7XHJcbiAgICB0aGlzLl90aXRsZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZSA9IGxpbms7XHJcbiAgICB0aGlzLl9pZCA9IF9pZDtcclxuICAgIHRoaXMuX293bmVyID0gb3duZXI7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGVtcGxhdGUpO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIHRoaXMuX215SWQgPSBteUlkO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50SW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9lbGVtZW50RGVzYyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19uYW1lXCIpO1xyXG4gICAgdGhpcy5fZWxlbWVudEJ0bkRlbGV0ZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG5fdHlwZV9kZWxldGVcIik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VcIik7XHJcbiAgICB0aGlzLl9saWtlQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWNvdW50ZXJcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIikuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX2RlbGV0ZVRoZUxpa2UgPSAocmVzKSA9PiB7XHJcbiAgICB0aGlzLl9saWtlcyA9IHJlcy5saWtlcztcclxuICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gcmVzLmxpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2VfYWN0aXZlXCIpO1xyXG4gIH07XHJcblxyXG4gIF9hZGRUaGVMaWtlID0gKHJlcykgPT4ge1xyXG4gICAgdGhpcy5fbGlrZXMgPSByZXMubGlrZXM7XHJcbiAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlX2FjdGl2ZVwiKTtcclxuICB9O1xyXG5cclxuICBfY2hlY2tNeUxpa2UgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgob2JqKSA9PiB7XHJcbiAgICAgIHJldHVybiBvYmouX2lkID09PSB0aGlzLl9teUlkO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudEltYWdlLnNyYyA9IHRoaXMuX2ltYWdlO1xyXG4gICAgdGhpcy5fZWxlbWVudEltYWdlLmFsdCA9IHRoaXMuX3RpdGxlO1xyXG4gICAgdGhpcy5fZWxlbWVudERlc2MudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIGlmICh0aGlzLl9vd25lci5faWQgPT09IHRoaXMuX215SWQpIHtcclxuICAgICAgdGhpcy5fZWxlbWVudEJ0bkRlbGV0ZS5jbGFzc0xpc3QuYWRkKFwiYnRuX3Zpc2libGVcIik7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5fY2hlY2tNeUxpa2UoKSkge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5faW1hZ2UsIHRoaXMuX3RpdGxlKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2soXHJcbiAgICAgICAgdGhpcy5fY2hlY2tNeUxpa2UoKSxcclxuICAgICAgICB0aGlzLl9pZCxcclxuICAgICAgICB0aGlzLl9kZWxldGVUaGVMaWtlLFxyXG4gICAgICAgIHRoaXMuX2FkZFRoZUxpa2VcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZWxlbWVudEJ0bkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzLl9lbGVtZW50LCB0aGlzLl9pZCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLy/QvtCx0YnQuNC5INC60LvQsNGB0YEg0LTQu9GPINC/0L7Qv9Cw0L/QvtCyXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwKTtcclxuICB9XHJcblxyXG4gIG9wZW5Qb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9jbG9zZUJ5RXNjYXBlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlUG9wdXAgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fY2xvc2VCeUVzY2FwZSk7XHJcbiAgfTtcclxuXHJcbiAgX2Nsb3NlQnlFc2NhcGUgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9jbG9zZUJ5Q2xpY2soZXZ0KSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldnQudGFyZ2V0O1xyXG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9vcGVuZWRcIikpIHtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmJ0bl90eXBlX2Nsb3NlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZVBvcHVwKTtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4gdGhpcy5fY2xvc2VCeUNsaWNrKGV2dCkpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuLy/QutC70LDRgdGBINC/0L7Qv9Cw0L/QvtCyINGBINGE0L7RgNC80L7QuVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgc3VibWl0Rm9ybSB9LCBwb3B1cCkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5fc3VibWl0Rm9ybSA9IHN1Ym1pdEZvcm07XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEZvcm0odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBzZXRJbml0aWFsSW5wdXRzVmFsdWVzKHZhbHVlcykge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlmICh2YWx1ZXNbaW5wdXQubmFtZV0pIHtcclxuICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlc1tpbnB1dC5uYW1lXTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChcclxuICAgICAgKGlucHV0KSA9PiAodGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKVxyXG4gICAgKTtcclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQge1xyXG4gIGJ1dHRvbkVkaXQsXHJcbiAgYnV0dG9uQWRkLFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbiAgcHJvZmlsZUF2YXRhcixcclxuICBidG5TdWJtaXRFZGl0LFxyXG4gIGJ0blN1Ym1pdEFkZCxcclxuICBidG5TdWJtaXREZWxldGUsXHJcbiAgYnRuU3VibWl0RWRpdEF2YXRhcixcclxuICBlcnJvclRlbXBsYXRlLFxyXG4gIGVycm9yc0NvbnRhaW5lcixcclxuICBsb2FkV3JhcHBlcnMsXHJcbn07XHJcblxyXG4vLyDQutC+0L3RhNC40LMg0LTQu9GPINC60LvQsNGB0YHQsCDQstCw0LvQuNC00LDRhtC40LhcclxuY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIi5wb3B1cF9fZXJyb3JcIixcclxufTtcclxuXHJcbmNvbnN0IGJ1dHRvbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ0bl90eXBlX2VkaXRcIik7IC8vINC60L3QvtC/0LrQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQv9GA0L7RhNC40LvRjFxyXG5jb25zdCBidXR0b25BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ0bl90eXBlX2FkZFwiKTsgLy8g0LrQvdC+0L/QutCwINC00L7QsdCw0LLQuNGC0Ywg0LrQsNGA0YLQvtGH0LrRg1xyXG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XHJcbmNvbnN0IGJ0blN1Ym1pdEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25fdHlwZV9lZGl0XCIpO1xyXG5jb25zdCBidG5TdWJtaXRFZGl0QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wb3B1cF9fYnV0dG9uX3R5cGVfZWRpdC1hdmF0YXJcIlxyXG4pO1xyXG5jb25zdCBidG5TdWJtaXRBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25fdHlwZV9hZGRcIik7XHJcbmNvbnN0IGJ0blN1Ym1pdERlbGV0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvbl90eXBlX2RlbGV0ZVwiKTtcclxuY29uc3QgZXJyb3JUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXJyb3JfX3RlbXBsYXRlXCIpO1xyXG5jb25zdCBlcnJvcnNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yc1wiKTtcclxuY29uc3QgbG9hZFdyYXBwZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5sb2FkLXdyYXBlclwiKTtcclxuIiwiaW1wb3J0IHtcclxuICBidG5TdWJtaXRBZGQsXHJcbiAgYnRuU3VibWl0RGVsZXRlLFxyXG4gIGVycm9yVGVtcGxhdGUsXHJcbiAgZXJyb3JzQ29udGFpbmVyLFxyXG4gIGxvYWRXcmFwcGVycyxcclxuICBwcm9maWxlQXZhdGFyLFxyXG59IGZyb20gXCIuL2NvbnN0YW50c1wiO1xyXG5cclxuZXhwb3J0IHtcclxuICByZW5kZXJMb2FkVGV4dEJ0bkVkaXQsXHJcbiAgcmVuZGVyTG9hZFRleHRCdG5BZGQsXHJcbiAgcmVuZGVyTG9hZFRleHRCdG5EZWxldGUsXHJcbiAgc2hvd0Vycm9yTWFzc2FnZSxcclxuICBkaXNwbGF5TG9hZFdyYXBwZXIsXHJcbn07XHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5TG9hZFdyYXBwZXIoaXNEaXNwbGF5KSB7XHJcbiAgaWYgKGlzRGlzcGxheSkge1xyXG4gICAgbG9hZFdyYXBwZXJzLmZvckVhY2goKHdyYXBlcikgPT4ge1xyXG4gICAgICB3cmFwZXIuY2xhc3NMaXN0LmFkZChcImRpc3BsYXlcIik7XHJcbiAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgbG9hZFdyYXBwZXJzLmZvckVhY2goKHdyYXBlcikgPT4ge1xyXG4gICAgICB3cmFwZXIuY2xhc3NMaXN0LnJlbW92ZShcImRpc3BsYXlcIik7XHJcbiAgICB9KTtcclxuICAgIHByb2ZpbGVBdmF0YXIuY2xhc3NMaXN0LmFkZChcImRpc3BsYXlcIik7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJMb2FkVGV4dEJ0bkVkaXQoaXNMb2FkaW5nLCBidG4pIHtcclxuICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICBidG4udGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCI7XHJcbiAgfSBlbHNlIHtcclxuICAgIGJ0bi50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LjRgtGMXCI7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJMb2FkVGV4dEJ0bkFkZChpc0xvYWRpbmcpIHtcclxuICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICBidG5TdWJtaXRBZGQudGV4dENvbnRlbnQgPSBcItCh0L7Qt9C00LDQvdC40LUuLi5cIjtcclxuICB9IGVsc2Uge1xyXG4gICAgYnRuU3VibWl0QWRkLnRleHRDb250ZW50ID0gXCLQodC+0LfQtNCw0YLRjFwiO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyTG9hZFRleHRCdG5EZWxldGUoaXNMb2FkaW5nKSB7XHJcbiAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgYnRuU3VibWl0RGVsZXRlLnRleHRDb250ZW50ID0gXCLQo9C00LDQu9C10L3QuNC1Li4uXCI7XHJcbiAgfSBlbHNlIHtcclxuICAgIGJ0blN1Ym1pdERlbGV0ZS50ZXh0Q29udGVudCA9IFwi0JTQsFwiO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VGVtcGxhdGVFcnJvcigpIHtcclxuICByZXR1cm4gZXJyb3JUZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXJyb3JcIikuY2xvbmVOb2RlKHRydWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFcnJvckVsZW1lbnQoZXJyKSB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZ2V0VGVtcGxhdGVFcnJvcigpO1xyXG4gIGVycm9yRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgXCIuZXJyb3JfX21hc3NhZ2VcIlxyXG4gICkudGV4dENvbnRlbnQgPSBgJHtlcnJ9LiDQp9GC0L4t0YLQviDQv9C+0YjQu9C+INC90LUg0YLQsNC6IDooYDtcclxuICByZXR1cm4gZXJyb3JFbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBoaWRlRXJyb3JNYXNzYWdlKGVycikge1xyXG4gIGVyci5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93RXJyb3JNYXNzYWdlKGVycikge1xyXG4gIGNvbnN0IGVyckVsZW0gPSBjcmVhdGVFcnJvckVsZW1lbnQoZXJyKTtcclxuICBlcnJvcnNDb250YWluZXIucHJlcGVuZChlcnJFbGVtKTtcclxuICBuZXcgUHJvbWlzZSgocmVzKSA9PiB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgZXJyRWxlbS5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgICByZXMoZXJyRWxlbSk7XHJcbiAgICB9LCAwKTtcclxuICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIGhpZGVFcnJvck1hc3NhZ2UocmVzKTtcclxuICAgICAgICAgIHJlc29sdmUocmVzKTtcclxuICAgICAgICB9LCA1MDAwKTtcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICByZXMucmVtb3ZlKCk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSk7XHJcbn1cclxuIiwiaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiOyAvLyDQuNC80L/QvtGA0YIg0LrQu9Cw0YHRgdCwINCy0LDQu9C40LTQsNGG0LjQuCDRhNC+0YDQvFxyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7IC8vINC40LzQv9C+0YDRgiDQutC70LDRgdGB0LAg0Y3Qu9C10LzQtdC90YLQsCDQutCw0YDRgtC+0YfQutC4XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjsgLy8g0LjQvNC/0L7RgNGCINC60LvQsNGB0YHQsCDQvtGC0YDQuNGB0L7QstC60Lgg0Y3Qu9C10LzQtdC90YLQvtCyXHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiOyAvLyDQuNC80L/QvtGA0YIg0LrQu9Cw0YHRgdCwINC/0L7Qv9Cw0L/QsCDRg9Cy0LXQu9C40YfQtdC90L3QvtC5INC60LDRgNGC0LjQvdC60LhcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiOyAvLyDQuNC80L/QvtGA0YIg0LrQu9Cw0YHRgdCwINC/0L7QsNC/0LAg0YEg0YTQvtGA0LzQvtC5XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiOyAvLyDQuNC80L/QvtGA0YIg0LrQu9Cw0YHRgdCwINGD0L/RgNCw0LLQu9GP0Y7RidC10LPQviDQvtGC0L7QsdGA0LDQttC10L3QuNC10Lwg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L/RgNC+0YTQuNC70Y9cclxuaW1wb3J0IFBvcHVwV2l0aERlbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanNcIjtcclxuaW1wb3J0IHtcclxuICByZW5kZXJMb2FkVGV4dEJ0bkVkaXQsXHJcbiAgcmVuZGVyTG9hZFRleHRCdG5BZGQsXHJcbiAgc2hvd0Vycm9yTWFzc2FnZSxcclxuICByZW5kZXJMb2FkVGV4dEJ0bkRlbGV0ZSxcclxuICBkaXNwbGF5TG9hZFdyYXBwZXIsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgYnV0dG9uRWRpdCxcclxuICBidXR0b25BZGQsXHJcbiAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICBwcm9maWxlQXZhdGFyLFxyXG4gIGJ0blN1Ym1pdEVkaXQsXHJcbiAgYnRuU3VibWl0RWRpdEF2YXRhcixcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7IC8v0LjQvNC/0L7RgNGCIERPTSDRjdC70LXQvNC10L3RgtC+0LIg0YHRgtGA0LDQvdC40YbRi1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxubGV0IHVzZXJJZDtcclxuXHJcbmNvbnN0IHZhbGlkYXRvckVkaXQgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBcImVkaXQtcHJvZmlsZVwiKTsgLy/QstC60LvRjtGH0LXQvdC40LUg0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC80Ysg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xyXG5jb25zdCB2YWxpZGF0b3JBZGQgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBcImFkZC1uZXctY2FyZFwiKTsgLy8g0LLQutC70Y7Rh9C10L3QuNC1INCy0LDQu9C40LTQsNGG0LjQuCDRhNC+0YDQvNGLINC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCB2YWxpZGF0b3JBdmF0YXIgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBcImNoYW5nZS1hdmF0YXJcIik7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKFxyXG4gIHtcclxuICAgIGJhc2VVcmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0yMFwiLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICBhdXRob3JpemF0aW9uOiBcIjc5YWNjZjhmLWNjNzYtNDAzMy04NGY5LTJkMWQ4MWMzMDE1N1wiLFxyXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgIH0sXHJcbiAgfSxcclxuICByZW5kZXJMb2FkVGV4dEJ0bkVkaXQsXHJcbiAgcmVuZGVyTG9hZFRleHRCdG5BZGQsXHJcbiAgcmVuZGVyTG9hZFRleHRCdG5EZWxldGUsXHJcbiAgZGlzcGxheUxvYWRXcmFwcGVyLFxyXG4gIGJ0blN1Ym1pdEVkaXQsXHJcbiAgYnRuU3VibWl0RWRpdEF2YXRhclxyXG4pO1xyXG5cclxuLy/Qv9C+0LvRg9GH0LXQvdC40LUg0Lgg0YPRgdGC0LDQvdC+0LLQutCwINC90LDRh9Cw0LvRjNC90L7QuSDQuNC90YTQvtGA0LzQsNGG0LjQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0Lgg0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L3QsNGH0LDQu9GM0L3QvtCz0L4g0YHQv9C40YHQutCwINC60LDRgNGC0L7Rh9C10LpcclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChbaW5mbywgY2FyZHNdKSA9PiB7XHJcbiAgICB1c2VySWQgPSBpbmZvLl9pZDtcclxuICAgIHVzZXNJbmZvLnNldFVzZXJJbmZvKGluZm8pO1xyXG4gICAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKGNhcmRzKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBzaG93RXJyb3JNYXNzYWdlKGVycik7XHJcbiAgfSlcclxuICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICBkaXNwbGF5TG9hZFdyYXBwZXIoZmFsc2UpO1xyXG4gIH0pO1xyXG5cclxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG4gICAgICBjYXJkc0xpc3QuYXBwZW5kSXRlbShjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIi5jYXJkc1wiXHJcbik7XHJcblxyXG5jb25zdCBjcmVhdGVDYXJkID0gKGRhdGEpID0+IHtcclxuICByZXR1cm4gbmV3IENhcmQoZGF0YSwgXCIudGVtcGxhdGVcIiwgdXNlcklkLCB7XHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrOiAoaW1hZ2UsIHRpdGxlKSA9PiB7XHJcbiAgICAgIHBvcHVwVHlwZUltYWdlLm9wZW5Qb3B1cChpbWFnZSwgdGl0bGUpO1xyXG4gICAgfSxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoZWxlbWVudCwgaWQpID0+IHtcclxuICAgICAgcG9wdXBUeXBlRGVsZXRlLm9wZW5Qb3B1cChlbGVtZW50LCBpZCk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrOiAobXlMaWtlLCBpZCwgZGVsZXRlVGhlTGlrZSwgYWRkVGhlTGlrZSkgPT4ge1xyXG4gICAgICBpZiAobXlMaWtlKSB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAuZGVsZXRlTGlrZShpZClcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlVGhlTGlrZShyZXMpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIHNob3dFcnJvck1hc3NhZ2UoZXJyKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLnB1dExpa2VDYXJkKGlkKVxyXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBhZGRUaGVMaWtlKHJlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgc2hvd0Vycm9yTWFzc2FnZShlcnIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBwb3B1cFR5cGVBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBzdWJtaXRGb3JtOiAoaXRlbSkgPT4ge1xyXG4gICAgICBhcGlcclxuICAgICAgICAucG9zdE5ld0NhcmQoaXRlbSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChyZXMpO1xyXG4gICAgICAgICAgY2FyZHNMaXN0LnByZXBlbmRJdGVtKGNhcmQuZ2VuZXJhdGVDYXJkKCkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIHNob3dFcnJvck1hc3NhZ2UoZXJyKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgIHJlbmRlckxvYWRUZXh0QnRuQWRkKGZhbHNlKTtcclxuICAgICAgICAgIHBvcHVwVHlwZUFkZC5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIucG9wdXBfdHlwZV9hZGRcIlxyXG4pO1xyXG5cclxuLy/QuNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQv9C+0L/QsNC/0LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xyXG5jb25zdCBwb3B1cFR5cGVFZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgc3VibWl0Rm9ybTogKGl0ZW0pID0+IHtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLnBhdGhVc2VySW5mbyhpdGVtKVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgIHVzZXNJbmZvLnNldFVzZXJJbmZvKHJlcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgc2hvd0Vycm9yTWFzc2FnZShlcnIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgcmVuZGVyTG9hZFRleHRCdG5FZGl0KGZhbHNlLCBidG5TdWJtaXRFZGl0KTtcclxuICAgICAgICAgIHBvcHVwVHlwZUVkaXQuY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLnBvcHVwX3R5cGVfZWRpdFwiXHJcbik7XHJcblxyXG4vL9C40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC/0L7Qv9Cw0L/QsCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcclxuY29uc3QgcG9wdXBUeXBlQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgc3VibWl0Rm9ybTogKGl0ZW0pID0+IHtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLnBhdGNoQXZhdGFyKGl0ZW0ubGluaylcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICB1c2VzSW5mby5zZXRVc2VySW5mbyhyZXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIHNob3dFcnJvck1hc3NhZ2UoZXJyKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgIHBvcHVwVHlwZUF2YXRhci5jbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgICByZW5kZXJMb2FkVGV4dEJ0bkVkaXQoZmFsc2UsIGJ0blN1Ym1pdEVkaXRBdmF0YXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLnBvcHVwX3R5cGVfYXZhdGFyXCJcclxuKTtcclxuXHJcbi8v0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/QvtC/0LDQv9CwINGD0LLQtdC70LjRh9C10L3QvdC+0Lkg0LrQsNGA0YLQuNC90LrQuFxyXG5jb25zdCBwb3B1cFR5cGVJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF90eXBlX2ltZ1wiKTtcclxuXHJcbmNvbnN0IHBvcHVwVHlwZURlbGV0ZSA9IG5ldyBQb3B1cFdpdGhEZWxldGUoXCIucG9wdXBfdHlwZV9kZWxldGVcIiwge1xyXG4gIGhhbmRsZURlbGV0ZUNhcmQ6IChpZCwgY2FyZCkgPT4ge1xyXG4gICAgcmVuZGVyTG9hZFRleHRCdG5EZWxldGUodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoaWQpXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgc2hvd0Vycm9yTWFzc2FnZShlcnIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcmVuZGVyTG9hZFRleHRCdG5EZWxldGUoZmFsc2UpO1xyXG4gICAgICAgIGNhcmQucmVtb3ZlKCk7XHJcbiAgICAgICAgcG9wdXBUeXBlRGVsZXRlLmNsb3NlUG9wdXAoKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG4vL9C40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINCx0LvQvtC60LAg0YPQv9GA0LDQstC70LXQvdC40Y8g0LjQvdGE0L7RgNCw0YbQuNC10Lkg0L/RgNC+0YTQuNC70Y9cclxuY29uc3QgdXNlc0luZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWU6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBhYm91dDogXCIucHJvZmlsZV9fYWJvdXQtbWVcIixcclxuICBhdmF0YXI6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxyXG59KTtcclxuXHJcbnBvcHVwVHlwZUVkaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBUeXBlQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwVHlwZUltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwVHlwZURlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFR5cGVBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnZhbGlkYXRvckVkaXQuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG52YWxpZGF0b3JBZGQuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG52YWxpZGF0b3JBdmF0YXIuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuYnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwVHlwZUVkaXQuc2V0SW5pdGlhbElucHV0c1ZhbHVlcyh1c2VzSW5mby5nZXRVc2VySW5mbygpKTtcclxuICB2YWxpZGF0b3JFZGl0LnJlc2V0VmFsaWRpdHlNYXNzYWdlKCk7XHJcbiAgdmFsaWRhdG9yRWRpdC5zZXRCdXR0b25TdGF0ZSgpO1xyXG4gIHBvcHVwVHlwZUVkaXQub3BlblBvcHVwKCk7XHJcbn0pO1xyXG5idXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICB2YWxpZGF0b3JBZGQucmVzZXRWYWxpZGl0eU1hc3NhZ2UoKTtcclxuICB2YWxpZGF0b3JBZGQucmVzZXRlSW5wdXRzVmFsdWVzKCk7XHJcbiAgdmFsaWRhdG9yQWRkLnNldEJ1dHRvblN0YXRlKCk7XHJcbiAgcG9wdXBUeXBlQWRkLm9wZW5Qb3B1cCgpO1xyXG59KTtcclxucHJvZmlsZUF2YXRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHZhbGlkYXRvckF2YXRhci5yZXNldGVJbnB1dHNWYWx1ZXMoKTtcclxuICB2YWxpZGF0b3JBdmF0YXIucmVzZXRWYWxpZGl0eU1hc3NhZ2UoKTtcclxuICB2YWxpZGF0b3JBdmF0YXIuc2V0QnV0dG9uU3RhdGUoKTtcclxuICBwb3B1cFR5cGVBdmF0YXIub3BlblBvcHVwKCk7XHJcbn0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBiYXNlVXJsLCBoZWFkZXJzIH0sXHJcbiAgICByZW5kZXJMb2FkVGV4dEJ0bkVkaXQsXHJcbiAgICByZW5kZXJMb2FkVGV4dEJ0bkFkZCxcclxuICAgIHJlbmRlckxvYWRUZXh0QnRuRGVsZXRlLFxyXG4gICAgZGlzcGxheUxvYWRXcmFwcGVyLFxyXG4gICAgYnRuU3VibWl0RWRpdCxcclxuICAgIGJ0blN1Ym1pdEVkaXRBdmF0YXJcclxuICApIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5fYXV0aG9yaXphdGlvbiA9IGhlYWRlcnMuYXV0aG9yaXphdGlvbjtcclxuICAgIHRoaXMuX2NvbnRlbnRUeXBlID0gaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXTtcclxuICAgIHRoaXMuX3JlbmRlckxvYWRUZXh0QnRuRWRpdCA9IHJlbmRlckxvYWRUZXh0QnRuRWRpdDtcclxuICAgIHRoaXMuX3JlbmRlckxvYWRUZXh0QnRuQWRkID0gcmVuZGVyTG9hZFRleHRCdG5BZGQ7XHJcbiAgICB0aGlzLl9yZW5kZXJMb2FkVGV4dEJ0bkRlbGV0ZSA9IHJlbmRlckxvYWRUZXh0QnRuRGVsZXRlO1xyXG4gICAgdGhpcy5fZGlzcGxheUxvYWRXcmFwcGVyID0gZGlzcGxheUxvYWRXcmFwcGVyO1xyXG4gICAgdGhpcy5fYnRuU3VibWl0RWRpdCA9IGJ0blN1Ym1pdEVkaXQ7XHJcbiAgICB0aGlzLl9idG5TdWJtaXRFZGl0QXZhdGFyID0gYnRuU3VibWl0RWRpdEF2YXRhcjtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHRoaXMuX2Rpc3BsYXlMb2FkV3JhcHBlcih0cnVlKTtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgIH0sXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgdGhpcy5fZGlzcGxheUxvYWRXcmFwcGVyKHRydWUpO1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcGF0aFVzZXJJbmZvKGRhdGEpIHtcclxuICAgIHRoaXMuX3JlbmRlckxvYWRUZXh0QnRuRWRpdCh0cnVlLCB0aGlzLl9idG5TdWJtaXRFZGl0KTtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IHRoaXMuX2NvbnRlbnRUeXBlLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcG9zdE5ld0NhcmQoZGF0YSkge1xyXG4gICAgdGhpcy5fcmVuZGVyTG9hZFRleHRCdG5BZGQodHJ1ZSk7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IHRoaXMuX2NvbnRlbnRUeXBlLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcGF0Y2hBdmF0YXIgPSAobGluaykgPT4ge1xyXG4gICAgdGhpcy5fcmVuZGVyTG9hZFRleHRCdG5FZGl0KHRydWUsIHRoaXMuX2J0blN1Ym1pdEVkaXRBdmF0YXIpO1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IHRoaXMuX2NvbnRlbnRUeXBlLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGRlbGV0ZUNhcmQgPSAoaWQpID0+IHtcclxuICAgIHRoaXMuX3JlbmRlckxvYWRUZXh0QnRuRGVsZXRlKHRydWUpO1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBwdXRMaWtlQ2FyZCA9IChpZCkgPT4ge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZGVsZXRlTGlrZSA9IChpZCkgPT4ge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfTtcclxufVxyXG4iLCIvL9C60LvQsNGB0YEg0LPQtdC90LXRgNCw0YbQuNC4INGB0LXQutGG0LjQuFxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgYXBwZW5kSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcHJlcGVuZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG4vL9C60LvQsNGB0YEg0L/QvtC/0LDQv9CwINGD0LLQtdC70LjRh9C10L3QvdC+0LPQviDQuNC30L7QsdGA0LDQttC10L3QuNGPXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwKSB7XHJcbiAgICBzdXBlcihwb3B1cCk7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fZGVzYyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Rlc2NyaXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlblBvcHVwID0gKGxpbmssIG5hbWUpID0+IHtcclxuICAgIHN1cGVyLm9wZW5Qb3B1cCgpO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2Rlc2MudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcclxuICB9O1xyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRGVsZXRlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwLCB7IGhhbmRsZURlbGV0ZUNhcmQgfSkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XHJcbiAgICB0aGlzLl9idXR0b25EZWxldGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25cIik7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9idXR0b25EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCh0aGlzLl9pZCwgdGhpcy5fY2FyZCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBvcGVuUG9wdXAgPSAoY2FyZCwgaWQpID0+IHtcclxuICAgIHN1cGVyLm9wZW5Qb3B1cCgpO1xyXG4gICAgdGhpcy5fY2FyZCA9IGNhcmQ7XHJcbiAgICB0aGlzLl9pZCA9IGlkO1xyXG4gIH07XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZSk7XHJcbiAgICB0aGlzLl9wcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0KTtcclxuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbyA9ICgpID0+IHtcclxuICAgIHRoaXMuX3Byb2ZpbGVWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX3Byb2ZpbGVWYWx1ZXMubmFtZSA9IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gICAgdGhpcy5fcHJvZmlsZVZhbHVlcy5hYm91dCA9IHRoaXMuX3Byb2ZpbGVBYm91dC50ZXh0Q29udGVudDtcclxuICAgIHJldHVybiB0aGlzLl9wcm9maWxlVmFsdWVzO1xyXG4gIH07XHJcblxyXG4gIHNldFVzZXJJbmZvID0gKHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KSA9PiB7XHJcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcm9maWxlQWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2F2YXRhcn0pYDtcclxuICB9O1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=